tinymce.PluginManager.add("emoticons", function(a, b) {
	function c() {
		var a;
		return a = '<table role="list" class="mce-grid">',
		tinymce.each(d, function(c) {
			a += "<tr>",
			tinymce.each(c, function(c) {
				var d = b + "/img/" + c + ".gif";
				a += '<td><a href="#" data-mce-url="' + d + '"><img src="' + d + '" style="width: 24px; height: 24px" /></a></td>'
			}),
			a += "</tr>"
		}),
		a += "</table>"
	}

	var d = [];
	for (var td = 0; td < 90; td++) {
		if (td % 15 == 0) {
			var tr = [td + 1];
		} else {
			tr.push(td + 1);
		}
		if (tr.length == 15) {
			d.push(tr);
		}
	}

	a.addButton("emoticons", {
		type: "panelbutton",
		panel: {
			role: "application",
			autohide: !0,
			html: c,
			onclick: function(b) {
				var c = a.dom.getParent(b.target, "a");
				c && (a.insertContent('<img src="' + c.getAttribute("data-mce-url") + '" />'), this.hide())
			}
		},
		tooltip: "Emoticons"
	})
});